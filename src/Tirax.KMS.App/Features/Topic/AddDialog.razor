@implements Tirax.KMS.App.Extensions.IDialog<string>

<MudDialog Class="rounded-xl">
    <DialogContent>
        <MudForm @ref="form" @bind-Errors="errors">
            <MudTextField Required="true" RequiredError="Concept name is required"
                          @bind-Value="conceptName" Immediate="true"
                          Label="Concept" />
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton StartIcon="@Icons.Material.Filled.Close" Color="Color.Primary" OnClick="CancelDialog">Cancel</MudButton>
        <MudButton StartIcon="@Icons.Material.Filled.Add" Color="Color.Primary" Disabled="HasErrors"
                   OnClick="ConfirmSave">Add</MudButton>
    </DialogActions>
</MudDialog>

@code {

    string conceptName = string.Empty;
    string[] errors = Array.Empty<string>();
    MudForm form = default!;

    [CascadingParameter]
    public MudDialogInstance MudDialog { get; set; } = default!;

    bool HasErrors => errors.Length > 0;
    
    void CancelDialog() {
        MudDialog.Cancel();
    }

    async Task ConfirmSave() {
        await form.Validate();
        if (!form.Errors.Any())
            MudDialog.Close(conceptName);
    }

}